% Análise Preditiva como Base para uma Abordagem Proativa de 
% Elasticidade em Cloud Computing
% PAULO IGOR LEOPOLDES BENDER
%
% Monografia - Trabalho de Conclusão de Curso I
% Bacharelado em Ciência da Computação
% 
% Elaborado com base nas orientações dadas no documento
% ``GUIA PARA ELABORAÇÃO DE TRABALHOS ACADÊMICOS''
% disponível no site da biblioteca da Unisinos.
% http://www.unisinos.br/biblioteca
%

%=======================================================================
% Declarações iniciais identificando a classe de documento e
% selecionando alguns pacotes adicionais.
%
% As opções disponíveis (separe-as com vírgulas, sem espaço) são:
% - twoside: Formata o documento para impressão frente-e-verso
%   (o default é somente-frente)
% - english,brazilian,french,german,etc.: idiomas usados no documento.
%   Deve ser colocado por último o idioma principal.
%=======================================================================
\documentclass[twoside,english,brazilian]{UNISINOSmonografia}
\usepackage[utf8]{inputenc} % charset do texto (utf8, latin1, etc.)
\usepackage[T1]{fontenc} % encoding da fonte (afeta a sep. de sílabas)
\usepackage{graphicx} % comandos para gráficos e inclusão de figuras
\usepackage{bibentry} % para inserir refs. bib. no meio do texto

%=======================================================================
% Escolha do sistema para geração de referências bibliográficas.
%
% O default é usar o estilo unisinos.bst.  Comente a definição abaixo
% e descomente a linha seguinte para usar o estilo do ABNTeX (é
% necessário ter esse pacote instalado).
%
% A vantagem do unisinos.bst é que ele permite o uso de um arquivo .bib
% seguindo as orientações tradicionais do BibTeX (veja essas orientações
% em http://ctan.tug.org/tex-archive/biblio/bibtex/contrib/doc/btxdoc.pdf).
% Entretanto, o estilo não suporta algumas citações mais exóticas como
% apud.  Para isso, use o ABNTeX, mas esteja ciente de que muitas de
% suas referências serão incompatíveis com os estilos tradicionais do
% BibTeX como plain, alpha, ieeetr, entre outros.
%=======================================================================
\unisinosbst
%\usepackage[alf]{abntcite}

%=======================================================================
% Dados gerais sobre o trabalho.
%=======================================================================
\autor{Bender}{Paulo Igor Leopoldes}
\titulo{Análise Preditiva como Base para uma Abordagem Proativa de Elasticidade em Cloud Computing}
%\subtitulo{}
\orientador[Prof.~Dr.]{Righi}{Rodrigo da Rosa}
%\coorientador[Prof.~Dr.]{Lamport}{Leslie}
\local{São Leopoldo}
\ano{2014}

%% dados específicos para Dissertação de Mestrado
%\unidade{Unidade Acadêmica de Pesquisa e Pós-Graduação}
%\curso{Programa de Pós-Graduação em Computação Aplicada}
%\nivel{Nível Mestrado}
%\natureza{%
%Dissertação apresentada como requisito parcial para a obtenção
%do título de Mestre pelo Programa de Pós-Graduação em Computação
%Aplicada da Universidade do Vale do Rio dos Sinos --- UNISINOS
%}
%% dados da ficha catalográfica (obrigatória somente para diss. e tese)
%\cip{Dissertação (mestrado)}{004.732}
%\bibliotecario{Bibliotecária responsável: Fulana da Silva}{12/3456}

%% dados específicos para monografia de Graduação
\unidade{Unidade Acadêmica Graduação}
\curso{Curso de Bacharelado em Ciência da Computação}
\natureza{%
Trabalho de Conclusão de Curso apresentado como requisito parcial
para a obtenção do título de Bacharel em Ciência da Computação
pela Universidade do Vale do Rio dos Sinos --- UNISINOS
}

% cada palavra-chave deve ser fornecida duas vezes, uma em português e
% outra no idioma estrangeiro (na verdade, em tantos idiomas quantos se
% desejar).
\palavrachave{brazilian}{Computação em Nuvem}
\palavrachave{brazilian}{Elasticidade}
\palavrachave{brazilian}{Análise Preditiva}
\palavrachave{brazilian}{Gerência de Recursos}
\palavrachave{english}{Cloud Computing}
\palavrachave{english}{Elasticity}
\palavrachave{english}{Predictive Analysis}
\palavrachave{english}{Resource provisioning}

%=======================================================================
% Início do documento.
%=======================================================================
\begin{document}
\capa
\folhaderosto
%\folhadeaprovacao % não deve ser incluída nos TCCs

%=======================================================================
% Dedicatória (opcional).
%
% O texto é normalmente colocado na parte de baixo da página, alinhado
% à direita.  Mas a formatação é basicamente livre.  Só não se escreve
% a palavra 'dedicatória'.
%=======================================================================
%\begin{dedicatoria}
%Aos nossos pais.\\[4ex] % quebra a linha dando um espaçamento maior
%\begin{itshape} % faz o texto ficar em itálico
%If I have seen farther than others,\\
%it is because I stood on the shoulders of giants.\\
%\end{itshape}
%--- \textsc{Sir Isaac Newton} % \textsc é o "small caps"
%\end{dedicatoria}

%=======================================================================
% Agradecimentos (opcional).
%=======================================================================
%\begin{agradecimentos}
%Obrigado!
%\end{agradecimentos}

%=======================================================================
% Epígrafe (opcional).
%
% ``[...] o autor apresenta uma citação, seguida de indicação de autoria,
% relacionada com a matéria tratada no corpo do trabalho. Podem, também,
% constar epígrafes nas folhas de aberturas das seções primárias.''
%=======================================================================
%\begin{epigrafe}
%``\textit{Ninguém abre um livro sem que aprenda alguma coisa}''.\\
%(Anônimo)
%\end{epigrafe}

%=======================================================================
% Resumo em Português.
%
% A recomendação é para 150 a 500 palavras.
%=======================================================================
\begin{abstract}
A própria definição de elasticidade se confunde com a definição de computação em nuvem. Sendo provavelmente, se não a característica mais significativa, uma das mais importantes. Este aspecto da cloud computing consiste na capacidade de aumentar ou diminuir a alocação de recursos, sejam eles instâncias de máquinas virtuais ou configurações de CPU, memória, largura de banda de rede, etc. E tais alterações devem se dar, preferencialmente, em tempo de execução e sem interrupções com o objetivo de atender requisitos de demanda e gerenciar os recursos de forma inteligente. A elasticidade e a escalabilidade levam ao usuário uma sensação de que seus recursos são ilimitados, enquanto que cabe ao provedor destes serviços, garantir sob condições diversas e dinâmicas que esta sensação seja mantida, enquanto busca minimizar os seus próprios custos operacionais. Logo, a utilização mais eficiente dos recursos computacionais é do interesse de ambos, e nisto a elasticidade tem um papel fundamental. Um dos grandes desafios que esta área apresenta é justamente a aplicação do princípio da elasticidade de maneira automática e proativa. Dada a complexidade de compreender quais requisitos são demandados por uma aplicação e seus diferentes estados ao longo do tempo. Os maiores provedores de computação em nuvem, em seus diferentes formatos, oferecem além do controle de escalabilidade manual, um controle automático mas de maneira reativa, o qual embora eficaz, não é tão eficiente quanto um controle proativo que tenha ciência das necessidades de recursos para tratar com certa previsibilidade a demanda futura de uma dada aplicação. O objetivo desta monografia é, a partir de um estudo das pesquisas recentes no campo da elasticidade proativa, juntamente com uma fundamentação em modelos matemáticos, propor uma abordagem de análise preditiva a partir dos dados de utilização dos serviços de cloud computing com o intuito de fornecer subsídios para a implementação de uma abordagem proativa para a questão da elasticidade.
\end{abstract}

%=======================================================================
% Resumo em língua estrangeira (obrigatório somente para teses e
% dissertações).
%
% O idioma usado aqui deve necessariamente aparecer nos parâmetros do
% \documentclass, no início do documento.
%=======================================================================
%\begin{otherlanguage}{english}
%\begin{abstract}
%This document presents guidelines on the use of UNISINOS's \LaTeX\ class for academic reports and dissertations.  At the same time, it %serves as an example on using the class, employing the main commands and providing further general orientations on the use of \LaTeX.  %In addition, we have added guidelines for the process of writing itself, collecting tips and recommendations that contribute to the %technical quality enhancement of academic monographs.  The Abstract should be composed of 150 to 500~words and must not contain any %citations.  It is suggested that a single paragraph be used.
%\end{abstract}
%\end{otherlanguage}

%=======================================================================
% Lista de Figuras (opcional).
%=======================================================================
%\listoffigures

%=======================================================================
% Lista de Tabelas (opcional).
%=======================================================================
%\listoftables

%=======================================================================
% Lista de Abreviaturas (opcional).
%
% Deve ser passada como parâmetro a maior das abreviaturas utilizadas.
%=======================================================================
%\begin{listadeabreviaturas}{seg., segs.}
%\item[ampl.] ampliado, -a
%\item[atual.] atualizado, -a
%\item[coord.] coordenador
%\item[N.~T.] Novo Testamento
%\item[seg., segs.] seguinte, -s
%\end{listadeabreviaturas}

%=======================================================================
% Lista de Siglas (opcional).
%
% Deve ser passada como parâmetro a maior das siglas utilizadas.
%=======================================================================
%\begin{listadesiglas}{FAPERGS}
%\item[ABNT] Associação Brasileira de Normas Técnicas
%\item[CAPES] Coordenação de Aperfeiçoamento de Pessoal de Nível Superior
%\item[FAPERGS] Fundação de Amparo à Pesquisa do Estado do Rio Grande do Sul
%\end{listadesiglas}

%=======================================================================
% Lista de Símbolos (opcional).
%
% Deve ser passado o maior (mais largo) dos símbolos utilizados.
%=======================================================================
%\begin{listadesimbolos}{Ca}
%\item[\textsuperscript{o}C] Graus Celsius
%\item[Al] Alumínio
%\item[Ca] Cálcio
%\end{listadesimbolos}

%=======================================================================
% Sumário
%=======================================================================
\tableofcontents

%=======================================================================
% Introdução
%=======================================================================
\chapter{Introdução}

% as epígrafes nos capítulos são opcionais
%\epigrafecap{The reasonable man adapts himself to the world; the unreasonable one persists in trying to adapt the world to himself. %Therefore all progress depends on the unreasonable man.}{George Bernard Shaw}

A computação em nuvem trouxe um novo modelo de relacionamento entre as empresas e os seus recursos computacionais. A gestão destes recursos sempre foi uma questão bastante delicada, que tem um reflexo direto no gerenciamento dos custos das companhias. E embora haja organizações que têm uma demanda por recursos computacionais com um comportamento mais previsível, é bastante significativo o número de empresas que têm necessidades mais dinâmicas neste aspecto.

Um exemplo clássico de comportamento com alto grau de variação é encontrado no comércio eletrônico. A sazonalidade com que os recursos são demandados faz com que as empresas gastem muito dinheiro em infraestrutura para garantir o desempenho desejado durante os picos de acesso, e fiquem com recursos parados durante a baixa temporada. É claro, que este cenário não é único do comércio eletrônico, na verdade a maioria das empresas, em maior ou menor grau, acabam apresentando um comportamento semelhante a este no que diz respeito às suas necessidades computacionais.

A solução oferecida pela cloud computing é justamente disponibilizar recursos computacionais para as empresas de acordo com suas respectivas demandas. Desta forma, os usuários não precisam arcar com o alto custo de manter um parque de máquinas, ou mesmo com as questões relacionadas a gestão e aquisição delas. E tudo isto a um custo bastante baixo, com uma disponibilidade imediata de contratação e um gerenciamento bastante simplificado.

Neste contexto, uma das características mais importantes da computação em nuvem é a elasticidade. Ou seja, a capacidade do ambiente computacional aumentar ou diminuir os recursos demandados pelo usuário. Esta capacidade se apresenta tanto em nível de instâncias de máquinas virtuais e/ou nós de computação, quanto em nível de CPU, memória e largura de banda de rede. Uma lista mais completa das características essenciais de um ambiente em nuvem pode ser encontrada em \cite{coutinho}, que cita \textit{"elasticidade rápida"} como uma destas características.

A política de alocação de recursos em ambientes de computação em nuvem pode ser tanto manual quanto automática. Para a abordagem automática, temos ainda duas classificações: reativa e proativa. Na primeira, o usuário define marcos (thresholds) para um mecanismo de regra-condição-ação através dos quais o sistema aloca mais recursos (threshold superior) ou os consolida (threshold inferior). Embora, esta primeira abordagem seja chamada de automática, se faz necessária a intervenção do usuário para especificar as regras, bem como conhecimento da ferramenta de nuvem. Por outro lado, a abordagem proativa usa técnicas de predição para identificar padrões e antecipar a alocação ou consolidação de recursos de forma automática, sem a intervenção do usuário.

A abordagem reativa, juntamente com as políticas manuais, é mais comum em sistemas comerciais de nuvem disponíveis na web. Enquanto que existe um esforço de pesquisas na academia para propor soluções proativas para a questão da elasticidade. Portanto, um dos grandes desafios para os provedores é justamente retirar a necessidade de intervenção do usário e oferecer mecanismos que implementem a elasticidade proativa. O que traria um ajuste mais fino na economia de recursos, dentre outros benefícios.

\section{Questão de Pesquisa}
Um dos grandes pontos a serem discutidos, no que diz respeito à implementação de um tratamento automático para a elasticidade, é a questão da análise do comportamento da aplicação. A qual oferece seus próprios obstáculos a serem transpostos. Uma técnica de auto-escalonamento que tenta antecipar os requisitos futuros de uma aplicação, baseado na análise de seu desempenho, é portanto, uma abordagem preditiva. Na literatura, este tema tem sido discutido sob diversos pontos de vista, como nos mostra o trabalho de \cite{Lorido-botr2012}. Algumas das técnicas sugeridas apresentam tanto uma natureza reativa quanto proativa, enquanto outras são excencialmente proativas. A análise preditiva baseada em séries temporais é identificada por \cite{Lorido-botr2012} como uma destas estratégias que têm uma abordagem puramente proativa. Uma série temporal é uma coleção de observações, as quais podem ser discretizadas ou não, feitas sequencialmente ao longo de um período de tempo. Ou como definido por \cite{Shumway2000}, séries temporais podem ser definidas como uma coleção de variáveis aleatórias indexadas de acordo com a ordem em que elas são obtidas no tempo. 

Posto isto, nossa questão de pesquisa é:
\begin{itemize}
	\item A análise de séries temporais pode ser usada para encontrar padrões na carga de trabalho de uma aplicação, com o intuito de prever valores futuros, de forma que ofereça subsídios para a implementação de uma solução de elasticidade proativa?
\end{itemize}

\section{Objetivos}
O objetivo deste trabalho é:

\begin{itemize}
	\item Apresentar uma proposta para análise preditiva que possa servir de base na implementação da elasticidade proativa em ambientes de computação em nuvem.
\end{itemize}

Para atingir o objetivo acima citado, temos os seguintes objetivos secundários:
\begin{itemize}
	\item Desenvolver uma estratégia para coleta de dados;
	\item Criar uma estrutura para analisar os dados e aplicar modelos matemáticos condizentes com os padrões encontrados;
	\item Disponibilizar como resposta uma sugestão de alteração da configuração vigente, em virtude da demandada prevista de acordo com a análise realizada. 
\end{itemize}


\section{Organização do Texto}
Este texto está organizado em cinco seções. Primeiramente, na seção 2, iremos revisar questões básicas a respeito da área da computação em nuvem, e as definições que são pertinentes ao escopo deste trabalho. Uma retomada dos tópicos relacionados às séries temporais também se faz necessária, bem como questões gerais a respeito de análise preditiva. Na seção 3, iremos avaliar trabalhos correlatos na área, e suas contribuições para a questão da elasticidade proativa. Esta avaliação tomará como objetivo traçar um quadro comparativo das soluções propostas, suas divergências e convergências, com o intuito de identificar lacunas e oportunidades de trabalho na literatura analisada. A seção 4 trará o modelo proposto, descrevendo sua arquitetura e metodologia para avaliação. E por fim, a seção 5 apresenta uma conclusão, especificando as contribuições esperadas, apontando trabalhos relacionados e um cronograma para o projeto.

%=======================================================================
% Escrevendo o Texto
%=======================================================================

%
%	FUNDAMENTAÇAO TEORICA
%
\chapter{Fundamentação Teórica}

\section{Computação em Nuvem}
Segundo \cite{Lorido-botr2012}, cloud computing é uma tecnologia emergente que está se tornando muito popular. E grande parte disso devesse a sua característica elástica, a qual permite aos usuários que adquiram e liberem recursos sob demanda, e paguem somente pelos recursos que eles precisam (modelo pay-as-you-go). Estes recursos se apresentam geralmente na forma de Máquinas Virtuais (Virtual Machines - VM). Há três principais modelos de serviços associados com a computação em nuvem, são eles:

%TODO conseguir referências bibliográficas para os exemplos citados abaixo
\begin{itemize}
	\item Infraestrutura como um serviço (IaaS) designa o provisionamento de recursos como rede, processamento, armazenamento e banda. Normalmente o usuário não administra ou controla a infraestrutura da nuvem, mas tem gerenciamento sobre os sistemas operacionais, armazenamento, aplicativos implantados, etc . Exemplos de infraestrutura como serviço são: Amazon EC2 e Google Compute Engine.
	\item Platform-as-a-Service (PaaS) designa ambientes de programação e ferramentas suportadas pelos provedores de nuvem que podem ser usadas pelos consumidores para construir e implantar aplicações na infraestrutura da nuvem. Alguns exemplos de plataforma como serviços são: Amazon Elastic Beanstalk, Heroku, Google App Engine e Microsoft Windows Azure.
	\item Software-as-a-Service (SaaS) designa aplicações hospedadas pelo fornecedor, sobre as quais o cliente não tem visibilidade da plataforma ou infraestrutura em que está implantada. Exemplos: Google Apps e Microsoft Office 365.
\end{itemize}

A computação em nuvem também pode ser caracterizada pelo seu modelo de implantação, o qual define restrição ou abertura de acesso, dentre outras coisas. Tais modelos podem ser: nuvem privada, nuvem pública, nuvem comunidade e nuvem híbrida. Para os objetivos deste trabalho, esta divisão é indiferente. Uma melhor definição destes modelos pode ser encontrada em \citep{coutinho}.

\section{Elasticidade}

Sem dúvida uma das principais razões para que a computação em nuvem seja utilizada é a capacidade de adquirir recursos de uma maneira dinâmica. Esta característica faz com que, para o cliente, a nuvem pareça possuir recursos computacionais infinitos. Por outro lado, para o provedor, o desafio de manter esta ilusão é enorme, pois é muito difícil compreender quais são os requisitos de elasticidade de uma aplicação e da carga de trabalho que ela apresenta.

Segundo o National Institute of Standards and Technology (NIST) em sua definição de cloud computing \cite{Mell2012}, o conceito de elasticidade é a capacidade de rápido provisionamento e desprovisionamento, com capacidade de recursos virtuais praticamente infinita e quantidade adquirível sem restrição a qualquer momento. \citep{Righi2013} também cita a importância da noção de tempo para o conceito de elasticidade e explica a diferença entre esta e a escalabilidade, conceitos muitas vezes confundidos. A escalabilidade se relaciona à capacidade do sistema ser expandido e este conceito é livre da noção de tempo.
%TODO - FIX referência a Coutinho não está sendo exibida
Existem várias definições para elasticidade, e em \cite{coutinho} encontramos uma análise das diferentes definições, após o que o autor sugere sua própria definição para o conceito: \textit{"Capacidade de adicionar e remover recursos de forma automática de acordo com a carga de trabalho sem interrupções e utilizando os recursos de forma otimizada"}.

Nos próximos parágrafos abordaremos algumas características da elasticidade.

\subsection{Ação de alocação de recursos}
A ação de alocação de recursos, ou modalidade da ação da elasticidade pode ser categorizada de duas formas: 

\begin{enumerate}
	\item Escalonamento horizontal, segundo \cite{Lorido-botr2012} é adicionar réplicas de novos servidores e balanceadores de carga para distribuir a carga entre todas as réplicas disponíveis. Ou seja, é possível aumentar ou diminuir o número de instâncias de máquinas virtuais, ou até mesmo migrá-las para novos nós de processamento.
	\item Escalonamento vertical é a mudança de alocação de recursos em tempo de execução para uma máquina que está em operação, com alocação ou desalocação de memória, CPU, rede, etc.
\end{enumerate}

\subsection{Política de alocação de recursos}
Quanto às políticas que regem o gerenciamento de recursos pela escalabilidade, temos duas abordagens segundo \cite{Galante2012}:

\begin{enumerate}
	\item Manual quando há necessidade de uma ação do usuário para alterar o aprovisionamento de recursos, a qual pode se dar através de uma interface de programação (API) ou uma interface de gerenciamento oferecida pelo \textit{middleware}.
	\item Automática quando o provedor inclui um serviço completo de monitoramento e alocação automática de recursos. Esta abordagem ainda se subdivide em reativa e proativa.
	A política automática reativa utiliza-se de mecanismos do tipo regra-condição-ação, estabelecendo um limite superior, que quando atingido, dispara regras específicas que fazem a ação de alocar recursos de acordo com o que está estipulado nas referidas regras. De igual forma, um limiar inferior serve para consolidar recursos quando atingido o limite estipulado. Estes limiares são conhecidos na literatura como \textit{thresholds}.
\end{enumerate}	
	Por outro lado, a política proativa usa técnicas de predição para automaticamente escalar recursos. O objetivo final de um sistema de auto escalonamento de recursos é ajustar a alocação e consolidação de recursos automaticamente para minimizar custos enquanto garante o cumprimento dos objetivos de nível de serviço (SLO), conforme \cite{Lorido-botr2012}.
	A questão do escalonamento automático pode ser implementada por diversas abordagens e uma discussão bastante extensa a este respeito pode ser encontrada em \cite{Lorido-botr2012}, que faz uma classificação de técnicas puramente reativas, proativas e cita algumas mistas. 	Para o escopo deste trabalho focaremos na abordagem automática proativa, com o uso de séries temporais, as quais serão discutidas nas próximas seções, as demais abordagens não serão discutidas neste trabalho, salvo casos em que se faça necessário abordar alguma outra estratégia em função de algum trabalho relacionado - citado na seção 3 - que a utilize.

\subsection{Implementação de elasticidade}
Os métodos empregados na implementação das soluções de elasticidade encontrados na literatura podem ser categorizados em três tipos: replicação, migração e redimencionamento. A replicação nada mais é que o escalonamento horizontal, descrito anteriormente. E é sem dúvida o método mais utilizado para prover elasticidade, tanto em provedores comerciais quanto em trabalhos na academia \cite{Galante2012}. O redimencionamento é a implementação do escalonamento vertical, o trabalho de \cite{Wilkes2010} emprega esta técnica e iremos analisá-lo melhor na seção de trabalhos relacionados. Por último, a migração é a transferência de uma máquina virtual entre servidores, geralmente esta técnica é usada para simular o comportamento obtido com o redimensionamento em nuvens que não permitem este tipo de ação \cite{Galante2012}.

\section{Análise de Séries Temporais}
Para analisar séries temporais, temos dois caminhos que podem ser usados individualmente ou em conjunto. Um é a abordagem do domínio do tempo e a outra a abordagem do domínio de frequência. No domínio do tempo, focamos em analisar a correlação entre pontos adjacentes de uma série com a dependência dos valores atuais com os valores no passado. Já na abordagem de domínio de frequência, nos preocupamos com as características de periodicidade. Na maioria dos casos o resultado obtido da aplicação dessas abordagens é semelhante para séries longas, mas segundo \cite{Shumway2000}, o desempenho para observações curtas é melhor quando realizado no domínio do tempo.
Vamos primeiramente entender melhor o que são as séries temporais e suas características mais fundamentais antes de nos aprofundarmos na questão da análise propriamente dita.

De acordo com \cite{Ehlers2009}, uma série temporal é uma coleção de observações feitas sequencialmente ao longo do tempo. Ele aponta como uma das características mais importantes deste tipo de dado o fato de haver dependência entre observações vizinhas. Ou seja, em séries temporais a ordem dos dados tem grande relevância. As séries temporais estão presentes em vários campos do conhecimento tais como: economia, medicina e metereologia. Elas podem ser utilizadas para encontrar padrões em uma carga de trabalho de um servidor, por exemplo. Ou para tentar predizer os valores futuros desta carga. Em ambos os casos a informação necessária para aplicação da técnica é uma lista das \textit{n} últimas observações da série temporal, chamada \textit{janela de entrada}, ou matematicamente conhecido como \textit{espaço de estados}.

\subsection{Conceitos básicos}
Quando realizamos observações continuamente no tempo, chamamos de série contínua. As séries também podem ser ditas discretas, quando as observações são realizadas em tempos específicos, normalmente com períodos iguais. Também podemos discretizar séries contínuas ao registrar observações em determinados intervalos de tempo.

\cite{Ehlers2009} cita os seguintes objetivos gerais para estudo de séries temporais:

\begin{itemize}
	\item Descrever propriedades da série, seus padrões, existência de sazonalidade ou variação cíclica.
	\item Explicar variações em um determinada série através das variações observadas em outra série temporal.
	\item Controlar processos através da análise de séries temporais, através das quais podemos identificar fatores de qualidade.
	\item Predizer valores futuros com base em observações passadas. 
\end{itemize}

Este último objetivo das séries temporais é objeto de estudo deste trabalho.

\subsubsection{Modelo clássico das séries temporais}

Segundo o modelo clássico de séries temporais, toda a série temporal é composta por quatro padrões:

\begin{itemize}
	\item Sazonalidade - quando uma série apresenta uma flutuação que se repete ao longo do tempo, em intervalos regulares normalmente inferiores a um ano, dizemos que esta apresenta um comportamento sazonal. Para ilustrar: é natural imaginarmos um aumento no número de vendas de uma determinada loja de brinquedos no período próximo ao natal, ou o aumento de requisições de um determinado site de comércio eletrônico em datas comemorativas. 
	\item Tendência - outra característica importante pertinente às séries temporais é a tendência. É o comportamento de longo prazo da série. Este pode ser de crescimento ou decrescimento, e apresenta diversos padrões: linear, exponencial e de amortecimento. No primeiro, observamos um padrão mais ou menos constante, no segundo a alteração dentro de um período de tempo está atrelada a um fator. Por exemplo, aumento de vendas em 1.4 ao ano. E por último, o padrão de amortecimento apresenta uma variação percentual em relação ao aumento do período anterior. Um aumento de 50 \% em vendas em relação ao ano anterior, se no primeiro ano tivermos 1000 vendas esperadas, então no segundo teremos 500 e assim por diante.
	\item Variação cíclica - flutuações nos valores da variável com duração superior a um ano, e que se repetem com certa periodicidade. Normalmente produzem oscilações de subida e de queda nas séries de forma suave e repetitiva.
	\item Variações irregulares - são as flutuações inexplicáveis, resultado de fatos fortuitos e inesperados como catástrofes naturais. Algumas vezes na literatura, este componente do modelo clássico das séries temporais é chamado de \textit{erro}.
\end{itemize}

%\subsubsection{Correlação}
%TODO explicar este conceito que é o mais importante em séries


\subsection{Processos Estocásticos}
Processos estocásticos são modelos probabilísticos adequados ao tratamento de dados de séries temporais. Podemos definir matematicamente processos estocásticos, segundo \cite{Ehlers2009}, da seguinte forma: uma coleção de variáveis aleatórias ordenadas no tempo e definidas em um conjunto de pontos \textit{T}, podendo ser contínuo ou discreto como mencionado anteriormente neste trabalho. A variável aleatória no tempo \textit{t}, pode ser denotada por \textit{X(t)} quando estivermos tratando do caso contínuo, no qual normalmente temos:

\[-\infty < \textit{t} < \infty\]

para o caso discreto, com

\[\textit{t} = 0,\pm1,\pm2...,\]

denotaremos a variável aleatória por \textit{X}_{t}.\newline

Um processo estocástico pode ser definido portanto da seguinte maneira: 

\[\textit{X(t}_{1}),..., \textit{X(t}_{k})\]

para qualquer conjunto de tempos e valor de } \textit{k}.\newline

Para descrever um processo estocástico, normalmente utilizamo-nos da média, variância e autocovariância. A média é o valor que aponta onde mais se concentram os dados da distribuição. Funciona como um ponto de equilíbrio das frequências. A variância de uma variável aleatória denota a medida de sua dispersão. Ou seja, demonstra quão longe os seus valores estão de um dado valor esperado. E por sua vez a autocovariânica é uma medida do grau de interdependência entre duas variáveis aleatórias. É também chamada de dependência linear.Estas funções são definidas abaixo respectivamente:

\[ \mu \textit{(t)} = E[\textit{X(t)}] \]
\[ \sigma^{2} \textit{(t)} = Var[\textit{X(t)}] \]
\[\gamma \textit{(t}_{1} \textit{,t}_{2}) = E[ \textit{X(t}_{1}) - \mu \textit{(t}_{1})] [ \textit{X(t}_{2}) - \mu \textit{(t}_{2})] \]

Existem muitos processos estocásticos que são utilizados na especificação de modelos para séries temporais. Um levantamento de trabalhos que utilizam séries temporais na predição de valores futuros para cargas de trabalhos na construção de uma abordagem proativa de elasticidade foi realizado por \citep{Lorido-botr2012}. Neste trabalho ele cita as seguintes processos estocásticos: processos de médias móveis, processos autoregressivos, modelos mistos ARMA, suavização exponencial e abordagens baseadas em aprendizado de máquina.\citep{Lorido-botr2012} classifica estas técnicas da seguinte maneira:

\begin{itemize}
	\item Métodos de médias - podem ser usados para suavizar a série temporal com o objetivo de remover ruído ou para fazer predições. A suavização visa remover discrepâncias (\textit{outliers}, as quais podem ter um efeito devastador no processo de predição. Nesta categoria encontramos as médias móveis e a suavização exponencial, por exemplo.
	\item Métodos autorregressivos - utilizados para predições. %TODO adicionar exemplos
	\item Processos autoregressivos médias móveis (ARMA) - combina ambos os métodos anteriores.
\end{itemize}
Uma descrição bastante detalhada destes métodos pode ser encontrada em \cite{Lee2009} e em \cite{Shumway2000}.

\section{Algoritmos e modelos probabilísticos utilizados no processo de predição}
Nesta seção abordaremos brevemente alguns dos algoritmos e dos processos estocásticos utilizados nos trabalhos relacionados citados na seção 3. Não pretendemos aqui esgotar o assunto, ou mesmo fornecer uma base matemática suficiente para a implementação dos mesmos. O propósito aqui é tão somente auxiliar na compreensão dos propósitos de tais técnicas, e porque são utilizadas nas diferentes soluções de elasticidade proativa sugeridas no próximo capítulo.

\subsection{Transformada rápida de Fourier (FFT)}
A Transformada de Fourier - \textit{Fast Fourier Transform} em inglês - ́e, segundo \cite{Goncalves2004}, uma ferramenta matemática que realiza a transição entre as variáveis tempo e frequência de sinais. Ela é, sem dúvida, uma descoberta muito importante no campo computacional em virtude da grande economia de processamento que proporciona, pois a transformada rápida de fourier diminui o tempo de processamento em aplicações de diferentes naturezas, tais como:  resolução de equações diferenciais, equações integrais, problemas inversos, processamento de sinal, etc.
%TODO incluir mais alguma informação sobre o uso da FFT no PRESS

\subsection{Cadeia de Markov}
Uma Cadeia de Markov ́e um tipo especial de processo estocástico que possui a chamada propriedade markoviana . Um processo estocástico tem a propriedade markoviana se os estados anteriores do processo são irrelevantes para a predição dos próximos estados, desde que o estado atual seja conhecido. 
\citep{Junior2011} acrescenta que a perda de memória é a base da caracterização das cadeias de Markov e ela estabelece que em um conjunto de estados discretos o futuro só depende do estado presente, ou seja, os estados anteriores são irrelevantes para a predição dos estados seguintes, desde que o estado atual seja conhecido.
%TODO incluir mais alguma informação sobre o uso da cadeia de markov no PRESS

\subsection{Modelo Oculto de Markov}
HMM \textit{(Hidden Markov Model)} é um modelo estatístico que difere da cadeia de Markov clássica pelo fato de que seus parâmetros são desconhecidos. Logo, o desafio deste processo estocástico é justamente a determinação dos parâmetros de seus parâmetros ocultos a partir dos seus parâmetros observáveis. E estes últimos por sua vez, retroalimentam o sistema, podendo ser usados para novas análises. É um modelo bastante apropriado para o processo de reconhecimento de padrões. HMM é uma ferramenta para representar uma distribuição de probabilidades sobre uma sequência de ovservações.

\subsection{Box & Jenkins (ARIMA)}
Essa metodologia permite que valores futuros de uma série sejam previstos tomando por base apenas seus valores presentes e passados. Isso é feito através da correlação temporal existente entre os valores existentes. A realização do processo temporal pelo método de Box & Jenkins é representada por um conjunto de processos estocásticos denominados modelos ARIMA (\textit{autoregressive integrated moving average}) onde, em cada instante de tempo t, existe um conjunto de valores que a série pode assumir, aos quais estão associadas possibilidades de ocorrência \citep{Silva2005}. 
Diversas variações deste modelo são encontrados na literatura, como o Sazonal ARIMA que inclui um tratamento especial para sazonalidade ao modelo clássico desta solução, dentre outros.
%TODO incluir mais alguma informação sobre o uso do ARIMA nos Trab. Rel.

%=======================================================================
% TRABALHOS RELACIONADOS
%=======================================================================
\chapter{Trabalhos Relacionados}
Este capítulo traz um estudo a respeito de diversos trabalhos, os quais se propõem a desenvolver uma solução para elasticidade proativa a partir de um modelo preditivo. Iniciamos com as particularidades de cada trabalho, e ao término do capítulo relacionaremos as diferentes abordagens em um quadro comparativo.

\section{PRESS: PRedictive Elastic ReSource Scaling}

Segundo \citep{Wilkes2010}, PRESS se esforça para alocar apenas os recursos suficientes para as aplicações, com o intuito de evitar violações de SLO e minimizar o desperdício de recursos. Ele rastreia continuamente os requisitos de recursos dinâmicos das aplicações de uma forma discreta, e prevê demandas de recursos futuros utilizando duas técnicas complementares. PRESS primeiro emprega técnicas de processamento de sinal (FFT) para identificar padrões de assinatura que são utilizados pelas suas predições. Se nenhuma assinatura é descoberta, PRESS emprega uma abordagem orientada para estatística, para capturar padrões de curto prazo na demanda de recursos, e usa um tempo discreto. Neste ponto, emprega cadeia de Markov para prever a demanda para o futuro próximo. Os modelos de previsão de recursos são repetidamente atualizados quando os padrões de consumo dos recursos mudam. PRESS dá maior prioridade para evitar a subestimação do que para evitar excesso de estimação uma vez que o primeiro é mais susceptível de causar violações de SLO.

Ele se mostrou um algoritmo muito bom em comparação com outros similares, tendo o menor overhead dentre aqueles analisados no artigo de \cite{Wilkes2010}. O PRESS foi desenvolvido para trabalhar no nível de IaaS, mais especificamente para definir alterações de CPU, memória, I/O e rede, ou seja, o tratamento de escalonamento é somente vertical. No trabalho analisado, para fins de simplificação, apenas o aspecto de tratamento de recursos de CPU foi abordado. PRESS implementa uma solução de elasticidade proativa, sem uso de qualquer técnica reativa.

O processo de predição do PRESS faz uso de duas estratégias: predição de demanda por recursos dirigida por padrão de assinatura e predição de demanda por recursos dirigida por estado. No primeiro, como já mencionado acima, técnicas de processamento de sinal são implementadas. O algoritmo consegue tratar, inclusive, situações em que mais de uma frequência se mostra presente. Para estes casos ele irá escolher o padrão de maior duração. Para os casos em que não se encontre padrões repetidos, uma cadeia de Markov com tempo discreto é criada. PRESS faz uso da transformada rápida de Fourier (FFT) para identificação de padrões de assinatura e de uma cadeia de Markov de tempo discreto para o tratamento da abordagem de estados. A predição se repete a cada minuto por padrão e, como tantos outros trabalhos também o fazem, é definida uma janela para coleta dos dados. Esta janela influencia diretamente o desempenho do algoritmo, existindo uma relação diretamente proporcional entre o tamanho dela e o tempo de processamento necessário para a conclusão da predição, influenciando diretamente o overhead do processo preditivo sobre todo o sistema. 


\section{Themis: Economy-Based Automatic Resource Scaling}
\cite{Costache2012} publicou este trabalho na 14ª conferência internacional de computação de alto desempenho e comunicação da IEEE. Tendo em vista um contexto de computação de alto desempenho, onde várias aplicações são executadas concomitantemente e disputam recursos entre si, o objetivo do Themis, segundo o autor, é o de utilizar um método econômico para alocar automaticamente os recursos para as aplicações que mais necessitam deles. A abordagem na qual ele se baseia é de executar um compartilhamento proporcional de recursos, garantindo diferenciação justa entre as aplicações de acordo com suas respectivas demandas, maximizando a utilização de recursos. Para apoiar o cumprimento do SLO, Themis fornece políticas de escala genéricas baseadas em loops de controle de feedback. Estas políticas se adaptam a demanda de recursos de acordo com as condições de infra-estrutura atual. O objetivo do Themis é atender as exigências a nível de infra-estrutura, logo seu campo de atuação é o modelo IaaS. Ele implementa em sua abordagem tanto um escalonamento vertical quanto horizontal. O primeiro para aplicações chamadas rígidas e o segundo para aquelas chamadas elásticas. \citep{Costache2012} utiliza a terminologia rígida para aplicações que possuem um comportamento linear de utilização de recursos, e elásticas para aquelas que possuem uma demanda de recursos dinâmica. O tratamento para elasticidade no Themis se dá de maneira híbrida, pois políticas de marcos são estabelecidas, conforme um padrão reativo e uma técnica simples de proatividade é utilizada concomitantemente. Esta técnica consiste basicamente em analisar continuamente o desempenho da aplicação e a quantidade de recursos, e conforme um padrão simples de crescimento ou declínio nas necessidades de recursos das aplicações analisadas, alocar ou desalocar recursos para as mesmas. 

O processo de predição do Themis é bastante rudimentar. Uma vez que o objetivo principal é aproveitar os recursos, não obrigatoriamente de maneira otimizada, mas de forma a privilegiar as aplicações que mais demandam recursos e a manter o SLO, o algortimo se atém apenas a perceber se a demanda por recursos está em crescimento ou declínio. Themis não utiliza nenhum modelo probabilístico para executar uma previsão, analisa apenas tendência em um processo estatístico simples.


\section{Elastic Resources Framework in IaaS}
\cite{Dhingra2013} apresenta em seu artigo, um framework para a camada de nuvem IaaS, que busca atender as necessidades de otimização na utilização de recursos em um ambiente de nuvem. Ele provê um motor de predição de carga de aplicação, o qual prediz em tempo de execução a demanda esperada. Estas informações são a entrada para o gerenciador de recursos, o qual deverá modular a alocação de recursos com base na demanda prevista. Em virtude dos erros de predição, os recursos podem ser superalocados ou subalocados. Superalocação leva a existência de recursos não utilizados e subalocação pode causar perda de desempenho, ou mesmo quebra de SLO. Para encontrar um bom trade-off, é derivado um modelo de estimativa de custos, a partir do qual um intervalo de confiança é calculado, com o objetivo de garantir uma melhor utilização dos recursos alocados.

O motor de predição do framework captura a variação de requisições de um servidor web na forma de uma série temporal discreta, a partir do histórico da carga da aplicação. Uma análise sistemática da série temporal, construída a partir destes dados, é executada offline com o objetivo de constuir o modelo de predição. Concomitantemente a este processo, um componente do framework calcula um \textit{intervalo de confiança ótimo}, o qual é baseado na minimificação do total de excesso de custo do sistema. Matematicamente falando, o total de excesso de custo se dá pela soma da superalocação com a variável que define os requisitos de SLA. Este intervalo de confiança é aplicado sobre o modelo a cada interação. É importante salientar que o modelo não é recalculado, mas o intervalo de confiança sim, e reaplicado ao modelo. 

Os dados são capturados em janelas de 24 horas durante uma semana, divididos apropriadamente para identificação de sazonalidade (esta medida dentro do intervalo de amostra e não de forma clássica). Um modelo probabilístico é rodado para realizar as predições em seguida. O modelo Sazonal ARIMA (SARIMA) é utilizado para predição e modelagem da série temporal. Os requisitos de recursos especificados pelo processo de predição que será então utilizado pelo framework, é baseado na fronteira superior de predição, altamente influenciada pela variável de intervalo de confiança, descrita anteriormente. Esta abordagem é utilizada para garantir que não haja quebra de SLO.


\section{ElaaS: An innovative Elasticity as a Service framework for dynamic management across the cloud stack layers}
A proposta do trabalho de \cite{Kranas2012} é bastante audaciosa, pois busca oferecer gerenciamento de elasticidade como um serviço. Em sua arquitetura, ElaaS segue princípios de SOA e disponibiliza web services para que qualquer plataforma possa implementar a solução. O propósito é disponibilizar o gerenciamento dinâmico em todas as camadas da pilha de cloud. É uma solução que busca ser genérica, distribuída e multi-thread. O trabalho descreve a API do framework, além de uma detalhada descrição de sua arquitetura. ElaaS é implementado como uma aplicação que pode ser customizada pelo usuário para que atenda suas necessidades de gerenciamento de elasticidade. 

O modelo proposto por \cite{Kranas2012} busca implementar tanto uma solução reativa quanto proativa. Para a primeira, toma ações corretivas de acordo com um mecanismo de regras, e para a proposta de elasticidade proativa, se utiliza de aprendizado de máquina ou redes neurais. Ficando a cargo do usuário definir o que irá utilizar em sua solução. Isto é feito abstraindo os detalhes da plataforma, de maneira que o usuário possa focar somente nas características da sua aplicação, ao definir os KPIs e implementar interfaces para o módulo de gerenciamento de lógica de negócio, componente responsável pelas decisões. 


\section{Cloud Resource Autoscaling System based on Hidden Markov Model (HMM)}
\cite{Nikravesh2014} apresenta uma solução bastante interessante do ponto de vista matemático para a implementação de elasticidade proativa. É um sistema de auto-escalonamento proativo baseado no modelo estatístico conhecido como modelo oculto de Markov ou Hidden Markov Model (\textit{HMM}). Esta abordagem foi testada na \textit{Amazon EC2} e obteve um percentual de acerto de 97\% em suas predições. O HMM é usado para modelar séries temporais estocásticas quando a sequência atual de estados não é observável. Em alguns casos, uma parte dos estados somente é observável, então uma variação do HMM é aplicada. Este modelo matemático é usado em quase a totalidade dos softwares de reconhecimento de voz, também tem larga aplicação em: softwares de biologia molecular, compressão de dados, inteligência artificial e problemas de reconhecimento de padrões em geral. A escolha do autor por usar HMM ao invés de uma cadeia de Markov clássica se deu em virtude do modelo clássico ter um baixo desempenho na inicialização e um longo período de treinamento.

No contexto de autoescalonamento, os estados usados pelos modelos de Markov são associados às condições do sistema. No trabalho de \cite{Nikravesh2014} o desempenho do sistema foi utilizado como métrica. O software Weka foi utilizado juntamente com sua extensão que implementa o HMM para realizar os testes e o treinamento do algoritmo.

O autor não implementou uma solução completa. A proposta do trabalho foi mostrar os resultados de um sistema de escalonamento que se utilize do modelo oculto de Markov como ferramenta em um motor de predição. Para isso, foram coletados datasets para o treinamento a partir de máqunas reais, e então confrontados os resultados do processo de predição a partir do algoritmo HMM implementado no Weka com novos datasets do período correspondente às previsões. Esta comparação foi efetuada com diversas métricas, dentre as quais o MAPE (\textit{Mean Absolute Percentage Error}) ou erro absoluto médio percentual apresentou uma exatidão de 97\% na fase de testes.

\section{Vertical scaling for prioritized VMs provisioning}

\cite{Yazdanov2012} descreve um projeto de um controlador on-line construído sobre o \textit{hypervisor Xen}, com o objetivo de facilitar o provisionamento elástico de recursos para aplicações combinando os recursos de VMs e dinamicamente adicionando novas CPUs virtuais. A partir da carga de trabalho \cite{Yazdanov2012} categoriza as aplicações em dois grupos: aplicações com requisitos críticos de tempo e aplicações sem requisitos críticos de tempo. Sendo as primeiras necessariamente priorizadas no modelo proposto, uma vez que a quebra deste requisito pode ocasionar problemas para o negócio da aplicação. Por exemplo, uma aplicação de comércio eletrônico pode perder clientes caso o tempo de resposta não seja adequado. Esta característica abre espaço para a uma abordagem na qual o conflito de recursos seja solucionado com a priorização do escalonamento vertical ao invés das custosas operações de escalonamento horizontal. São combinados, portanto, mudanças de poder da CPU da VM com poder extendido de CPU, plugando novas CPUs em tempo de execução. Obtendo assim um mecanismo eficiente de alocação de recursos com baixa latência para máquinas priorizadas que possuem necessidades críticas de tempo.

O \textit{Xentop} é utilizado para obter as estatísticas de CPU e os ajustes são feitos utilizando \textit{Xen Credit-Scheduler}. Estes dados então são enviados para o módulo de previsão, e um módulo de correção de erro faz ajustes para evitar quebra de SLO pelos resultados da previsão. Caso o valor previsto exceda o poder de CPU atual, então o mecanismo descrito anteriormente é acionado plugando uma nova CPU. A previsão se utiliza de um modelo linear, o que explica a pequena sobrecarga de consumo de CPU para os cálculos. Este modelo opera previsões em uma janela de 1 a 30 segundos no futuro, utilizando-se de um conjunto de teste de 100 amostras das leituras e sendo retroalimentado por novos dados a todo instante, de acordo com a janela pré-estabelecida. O modelo utilizado é um modelo auto-regressivo (AR), este é um modelo mais simples que o ARIMA, já citado neste trabalho. Como se trata de um modelo linear, não é capaz de prever alterações como sazonalidade ou quaisquer discrepâncias de outros modelos mais complexos. Entretanto, a abordagem de previsão com janelas de no máximo 30 segundos, faz com que seja possível, na maioria dos casos acompanhar a progressão no aumento de demandas mesmo com um modelo linear, com uma taxa razoável de acertos.


\section{Comparativo dos trabalhos relacionados}
Nesta seção traçaremos um paralelo entre as principais características dos trabalhos relacionados nesta pesquisa. E ao final será apresentada uma avaliação, ressaltando os aspectos que ainda precisam ser desenvolvidos pelos trabalhos da área, o que nos propomos a fazer no presente trabalho e está detalhado no próximo capítulo que trata do modelo proposto.


\begin{table}[!htpd]
\tiny
	\caption{Tabela de comparação dos trabalhos relacionados}
	\begin{center}
		\begin{tabular}{llllll}
				
\hline
\textbf{Trabalho}		&\textbf{Escopo}&\textbf{Política}		&\textbf{Escalonamento}	&\textbf{Técnica}		&\textbf{Propósito}\\

\hline			
PRESS					&IaaS			&proativa				&V						&FFT e Markov				&Desempenho\\

\hline							
Themis					&IaaS			&reativa e proativa		&H e V					&Thresholds e AR			&Compartilhamento proporcional de recursos\\

\hline
Elastic R.F. in IaaS 	&IaaS			&proativa				&V						&SARIMA						&Otimização do uso de recursos e desempenho\\

\hline
ElaaS					&IaaS,PaaS,SaaS	&reativa e proativa		&H e V					&Thresholds, aprendizado de máquina e redes neurais				&Elasticidade como serviço\\

\hline
Cloud R.A.S. HMM		&IaaS			&proativa				&V						&HMM						&Desempenho	e eficiência de predições\\

\hline
Vertical scaling		&IaaS			&reativa e proativa		&H e V					&Thresholds e AR			&Desempenho\\
\hline


		\end{tabular}
	\end{center}
\end{table}

Embora com propósitos diversos e estratégias diferentes, em sua maioria os trabalhos estudados apontam para horizontes semelhantes. Todos eles atendem a camada de infraestrutura da nuvem, com uma menção especial para o trabalho de \cite{Kranas2012}, o ElaaS. Este tem uma abordagem que visa fornecer elasticidade como serviço, e portanto, é possível adaptá-lo para uso nas demais camadas. Na questão de escalonamento temos o redimensionamento, principalmente de poder de processamento, como abordagem mais comum. Alguns trabalhos ainda sugerem uma abordagem através da qual é possível implementar tanto o escalonamento vertical quanto o horizontal. Neste ponto, é interessante ressaltar o trabalho de \cite{Yazdanov2012}, que propõe uma solução para o problema do conflito de recursos, utilizando-se preferencialmente de escalonamento vertical para máquinas priorizadas que rodam aplicações com requisitos críticos de tempo, enquanto faz uso do escalonamento horizontal para as demais máquinas. No campo das técnicas de predição temos uma predominância dos modelos autoregressivos, com o uso de processos para criação de modelos sendo pré-computados e a predição a partir destes modelos sendo utilizada em tempo de execução. Aqui podemos perceber o difícil equilíbrio entre um modelo probabilístico eficiente e o tempo necessário para a construção de um modelo preditivo adequado a realidade das aplicações. Alguns autores, como \cite{Yazdanov2012} e \cite{Costache2012} preferiram uma estratégia linear mais simples, que lhes garantiu desempenho na execução do algoritmo à custa da eficiência das predições. Neste ponto, o trabalho de \citep{Wilkes2010}, com o PRESS, e de \cite{Nikravesh2014} com o uso do modelo oculto de Markov como técnica do motor de predição, se destacam. PRESS, com uma abordagem faseada para a construção da predição, busca encontrar padrões com FFT e com cadeia de Markov, e obteve um bom desempenho em tempo de execução, mesmo com janelas pequenas de captura de dados para retroalimentação do modelo. Mas como optou por sempre escolher o maior valor da predição para garantir que não haja quebra de SLO, seus resultados mostram que na questão otimização ele não obteve os melhores resultados. \cite{Nikravesh2014} ao usar HMM mostrou a maior eficiência dentre os algoritmos testados, atingindo uma margem de 97\% de acertos na fase de teste do seu modelo e um ótimo desempenho em tempo de execução, após ter o modelo criado, é claro.

Concluímos que o equilíbrio entre um bom desempenho em tempo de execução e um algoritmo apropriado, com uma elevada taxa de acertos que resulte no uso otimizado dos recursos, seja o objetivo de um bom motor de predição. Portanto, os trabalhos analisados deixaram uma lacuna em relação a esta questão por não apresentarem um algoritmo que seja eficiente e ao mesmo tempo um processo de predição rápido. Nos trabalhos onde um destes itens foi contemplado, o outro necessariamente não esteve presente, ou o objetivo do trabalho não era exatamente a otimização dos recursos, o que justificou as abordagens tomadas pelos autores.

%=======================================================================
% MODELO PROPOSTO
%=======================================================================
\chapter{Modelo}

Neste capítulo apresentaremos nosso modelo e debateremos em termos gerais as questões de projeto, sua arquitetura e como pretendemos avaliar o desempenho da nossa proposta. Não pretendemos aqui extinguir tais assuntos, mas mostrar as direções que buscamos tomar com este projeto.

\section{Questões de projeto}
O objetivo deste trabalho é propor um método de análise preditiva a partir dos dados de carga de uma aplicação, com o intuito de fornecer subsídios para a implementação de uma abordagem proativa para a questão da elasticidade. Que deverá apresentar um processo de predição com um bom desempenho, e resultados que comprovem um alto grau de eficiência na questão da otimização dos recursos. Portanto, o modelo aqui proposto tem como escopo somente o módulo de predição.

No início deste trabalho propusemos a seguinte questão de pesquisa: a análise de séries temporais pode ser usada para encontrar padrões na carga de trabalho de uma aplicação, com o intuito de prever valores futuros, de forma que ofereça subsídios para a implementação de uma solução de elasticidade proativa? Neste ponto de nossos estudos, podemos afirmar com certeza que sim. Mas descobrimos que a pergunta pode e deve ser ampliada, para sabermos se é possível o uso de análise de séries temporais, utilizando-se de um modelo probabilístico que apresente alto grau de exatidão em suas predições e que tenha um bom desempenho, o qual nos permita utilizá-lo em tempo de execução sem um aumento acentuado de overhead.

Para que se possa manter o foco no real propósito deste trabalho, iremos abstrair as questões que permeiam a proposta e não são inerentemente fundamentais para a construção do módulo de predição. Sendo assim, como resultado deste modelo não teremos uma implementação genérica ou adaptável, ou ao menos esta não será uma preocupação de projeto, visto que os objetivos principais são o tempo de processamento e exatidão dos resultados. O escalonamento empregado será vertical e a única dimensão analisada o poder de processamento, pois estes itens são suficientes para que cumpramos os objetivos a que nos propusemos no início deste trabalho. 

Não será criada uma API detalhada neste momento. E até mesmo os resultados da predição não receberão um tratamento para serem consumidos por uma ou outra plataforma específica. Pois entendemos que estas são questões secundárias, e não influenciam no propósito principal do trabalho. Optando assim por manter baixa a complexidade do projeto. E de igual forma, usaremos uma plataforma de cloud arbitrária que julgarmos mais apropriada para a coleta dos dados, sem preocupação com compatibilidade com outras pelos mesmos motivos já descritos nesta seção.

\section{Arquitetura}

Tal como mencionado na seção anterior, não nos preocuparemos com as questões periféricas que não têm uma influência direta sobre o propósito do trabalho. Sendo assim, não definiremos neste momento o formato da saída do nosso projeto. Assim como a escolha da plataforma de virtualização não será feita neste momento, pois se faz necessário alguns testes para avaliação. Basta, entretanto afirmar que o projeto será executado com o auxílio de uma plataforma de nuvem que forneça uma API para coleta dos dados de utilização das VMs, mais especificamente os dados de processamento. E priorizaremos na escolha a API com um bom desempenho neste processo.

Em termos gerais a arquitetura do projeto contará com cinco módulos:

\begin{itemize}
	\item Módulo de captura, responsável pela comunicação com a ferramenta que fornecerá os dados de utilização da VM. Trata-se de um módulo relativamente simples, o qual tem como objetivo somente a comunicação com o sistema terceiro e a formatação dos dados para que sejam utilizados pelo sistema de predição.
	\item Módulo de tratamento dos dados que se destina a preparar as informações coletadas, para que sejam submetidas aos algoritmos de predição que serão testados. Dentre os procedimentos que serão desenvolvidos por este módulo estarão testes de validação, para garantir que a série seja adequada para os algoritmos aos quais será submetida. Também um tratamento para outliers será utilizado, com o intuito de evitar discrepâncias nas predições em decorrência da existência de valores atípicos na série examinada.
	\item Módulo de modelos probabilísticos, o qual provê a implementação de alguns dos algoritmos que iremos examinar. Este módulo recebe como entrada a série tratada e a submete aos modelos disponíveis, tendo como saída o resultado de suas previsões. A quantidade de modelos implementados irá depender de nossos testes de exatidão.
	\item Módulo de avaliação de precisão que objetiva analisar as previsões a partir de um indicador de aderência de previsão. E então escolher aquele que melhor modela o comportamento da aplicação submetida à análise.
	\item Módulo de exportação o qual é a última camada da aplicação, destinado a preparar os dados para a saída. É um módulo simples, com o intuito de definir um formato de apresentação para os dados da série de previsão.
\end{itemize}

\section{Metodologia de Avaliação}
O processo de avaliação se dará em dois momentos: a avaliação dos resultados de previsão por indicadores e a avaliação da aplicação frente aos objetivos a que o projeto se propôs. Teremos uma avaliação em tempo de execução através do \textit{módulo de avaliação de precisão}, descrito na seção anterior. Neste ponto nos utilizaremos de um indicador de aderência de previsão. O indicador escolhido será o \textit{Theil's U}, que é uma medida relativa a precisão que compara os resultados previstos com os dados históricos mínimos, analisando a aderência dos valores da previsão aos da tendência da série. Este índice também auxilia na eliminação de métodos que apresentem grandes erros \cite{Shumway2000}. Ele funcionará como um indicador constante de qualidade, avaliando em tempo real a exatidão das previsões, e portanto, podendo adaptá-las no caso de haver necessidade de fazê-lo. Além desta avaliação também utilizaremos a média de erro absoluto percentual (\textit{MAPE}), que também é conhecido como média de desvio percentual absoluto. É uma medida da precisão de um método para o cálculo dos valores de séries temporais, também relacionado à análise de tendência, e é geralmente expresso como uma percentagem de precisão.

O segundo momento de avaliação se refere a avaliação do modelo frente aos objetivos do projeto. Tendo em vista que buscamos um alto grau de exatidão das previsões, juntamente com um tempo de execução que não acrescente overhead significativo, a avaliação da aderência do modelo à sua proposta se utilizará dos indicadores descritos no parágrafo anterior, e dos tempos de processamento de diferentes amostras de carga (\textit{workload}) de dados da VM. Em termos gerais, o tempo de processamento e resposta do módulo de previsão não pode ser superior a janela de tempo necessária para implementar as mudanças sugeridas por ele. A resposta deve ser fornecida antes do período em que as mudanças devem ser aplicadas.


%=======================================================================
% CONCLUSÃO
%=======================================================================
\chapter{Conclusão}
A partir da revisão teórica que abordamos no capítulo 2, nos foi possível estabelecer as bases necessárias para que pudéssemos compreender os desafios inerentes a uma implementação de elasticidade proativa. E à luz destas informações, estudamos os trabalhos apresentados no capítulo 3, os quais se propõem de diversas formas a apresentar uma proposta de implementação de elasticidade automática preditiva. Conseguimos traçar um paralelo entre estes dois capítulos, o que nos capacitou a realizarmos uma avaliação destes trabalhos, e nos trouxe a percepção da lacuna existente nos artigos examinados, no que se refere a necessidade de uma implementação que tenha um bom desempenho em tempo de execução e ao mesmo tempo utilize um algoritmo eficiente, atingindo de fato o propósito de otimização de recursos através do provisionamento inteligente. Ao concluir este trabalho, procuraremos mostrar as contribuições que esperamos alcançar a partir daqui, além de uma breve explanação sobre os trabalhos relacionados e outras literaturas relacionadas. Fecharemos este capítulo apresentando o cronograma para implementação do projeto aqui proposto.

\section{Contribuições esperadas}
Nossa questão de pesquisa original tratava da possibilidade de se usar análise de séries temporais para encontrar padrões na carga de trabalho de uma aplicação, com o intuito de prever valores futuros, objetivando oferecer subsídios para  a implementação de uma solução de elasticidade proativa. A partir da avaliação dos trabalhos relacionados, concluímos que as séries temporais, assim como várias outras técnicas podem ser utilizadas na implementação de soluções de elasticidade proativa. Sugerimos então expandir esta questão, de forma que nosso projeto possa confirmar a possibilidade do uso de séries temporais com um modelo probabilístico que ofereça um alto grau de exatidão em suas previsões, e que apresente um ótimo desempenho em execução. Com isto, pretendemos que este trabalho possa contribuir com uma definição mais exata de quais modelos probabilísticos são mais adequados para serem empregados em predição de recursos em ambientes de \textit{cloud computing}, que busquem a otimização destes recursos como propósito. 

Esperamos também que o modelo desenvolvido possa servir de base para a implementação de uma solução de elasticidade proativa, a qual atenda plenamente os requisitos de uma solução que busca alto grau de confiabilidade em suas previsões. E tenha uma execução com tempo aceitável, de forma a não comprometer o desempenho do sistema.

\section{Trabalhos relacionados}

\section{Cronograma}

% objetivos secundários
%Para atingir o objetivo acima citado, temos os seguintes objetivos secundários:
%Desenvolver uma estratégia para coleta de dados;
%Criar uma estrutura para analisar os dados e aplicar modelos matemáticos condizentes com os padrões encontrados;
%Disponibilizar como resposta uma sugestão de alteração da configuração vigente, em virtude da demandada prevista de acordo com a análise realizada. 

%=======================================================================
% Referências
%=======================================================================
\bibliography{tcc1}


%=======================================================================
% Exemplo de Apêndice
% O Apêndice é utilizado para apresentar material complementar elaborado
% pelo próprio autor.  Deve seguir as mesmas regras de formatação do
% corpo principal do documento.
%=======================================================================
%\appendix
%\chapter{Informações Complementares}

%O Apêndice é o lugar para incluir textos complementares, que não são essenciais para o entendimento do assunto principal da monografia, mas que podem contribuir com informação relevante (por exemplo, uma prova matemática, uma conceituação básica, etc.).  Ele deve seguir o formato normal do documento.

%=======================================================================
% Exemplo de Anexo
% O Anexo é utilizado para a ``inclusão de materiais não elaborados pelo
% próprio autor, como cópias de artigos, manuais, folders, balancetes, etc.
% e não precisam estar em conformidade com o modelo''.
%=======================================================================
%\annex
%\chapter{Artigos Publicados}
%Existe diferença entre os Apêndices e os Anexos.  Os apêndices trazem informação escrita pelo próprio autor do trabalho, incorporando-se ao formato da monografia como um todo.  Já um anexo é um material à parte, definido/publicado por si só, e que o autor julga conveniente ser apresentado juntamente com a monografia.  Normalmente também vai apresentar formato próprio, como um artigo publicado, um folder, uma planilha, etc.
\end{document}
